<!DOCTYPE html>
<html lang="en">
	<head>
		<base href="." />
		<meta charset="UTF-8" />
		<link rel="icon" type="image/svg+xml" href="/vite.svg" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
			crossorigin="anonymous"
		/>
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
			crossorigin="anonymous"
		></script>

		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
			integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		/>

		<script>
			function toggleUpdate(id, albumName, albumArtist, albumYear) {
				//save id in localstorage
				const modalTitleLabel =
					document.getElementById("updateAlbumLabel");
				const name = document.getElementById("update-album-name");
				const artist = document.getElementById("update-artist-name");
				const year = document.getElementById("update-year");

				name.value = albumName;
				artist.value = albumArtist;
				year.value = albumYear;
				modalTitleLabel.innerHTML = `Update album ${id}`;

				localStorage.setItem("albumId", id);
			}
		</script>

		<title>Albums</title>
	</head>

	<body>
		<div id="app">
			<div class="container">
				<h3 class="text-justify">All Albums:</h3>
				<table class="table">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">Name</th>
							<th scope="col">Artist</th>
							<th scope="col">Year</th>
							<th scope="col">Actions</th>
						</tr>
					</thead>
					<tbody id="table-body" />
					<script type="module" src="/main.js"></script>
				</table>
				<br />
				<button
					type="button"
					class="btn btn-success"
					data-bs-toggle="modal"
					data-bs-target="#addAlbum"
				>
					<i class="fa fa-plus"></i>
				</button>
			</div>

			<div
				id="spinner"
				class="d-none justify-content-center align-items-center"
			>
				<div class="spinner-border text-primary" role="status">
					<span class="visually-hidden">Loading...</span>
				</div>
			</div>
		</div>

		<!-- Add Modal -->
		<div
			class="modal fade"
			id="addAlbum"
			tabindex="-1"
			aria-labelledby="addAlbumLabel"
			aria-hidden="true"
		>
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="addAlbumLabel">
							Add Album
						</h5>
						<button
							type="button"
							class="btn-close"
							data-bs-dismiss="modal"
							aria-label="Close"
						></button>
					</div>
					<div class="modal-body">
						<form id="post-form">
							<div class="mb-3">
								<label for="name" class="col-form-label"
									>Name:</label
								>
								<input
									type="text"
									class="form-control"
									id="album-name"
									required
								/>
							</div>
							<div class="mb-3">
								<label for="artist" class="col-form-label"
									>Artist:</label
								>
								<input
									type="text"
									class="form-control"
									id="artist-name"
									required
								/>
							</div>
							<div class="mb-3">
								<label for="year" class="col-form-label"
									>Year:</label
								>
								<input
									type="number"
									class="form-control"
									id="year"
									required
								/>
							</div>
							<div class="modal-footer">
								<button
									type="button"
									class="btn btn-secondary"
									data-bs-dismiss="modal"
								>
									Close
								</button>
								<button
									type="button"
									class="btn btn-primary"
									id="add-album"
									data-bs-dismiss="modal"
								>
									Add
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>

		<!-- Update Modal -->
		<div
			class="modal fade"
			id="updateAlbum"
			tabindex="-1"
			aria-labelledby="updateAlbumLabel"
			aria-hidden="true"
		>
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="updateAlbumLabel">
							Update Album
						</h5>
						<button
							type="button"
							class="btn-close"
							data-bs-dismiss="modal"
							aria-label="Close"
							onclick=""
						></button>
					</div>
					<div class="modal-body">
						<form id="update-form">
							<div class="mb-3">
								<label for="name" class="col-form-label"
									>Name:</label
								>
								<input
									type="text"
									class="form-control"
									id="update-album-name"
									required
								/>
							</div>
							<div class="mb-3">
								<label for="artist" class="col-form-label"
									>Artist:</label
								>
								<input
									type="text"
									class="form-control"
									id="update-artist-name"
									required
								/>
							</div>
							<div class="mb-3">
								<label for="year" class="col-form-label"
									>Year:</label
								>
								<input
									type="number"
									class="form-control"
									id="update-year"
									required
								/>
							</div>
							<div class="modal-footer">
								<button
									type="button"
									class="btn btn-secondary"
									data-bs-dismiss="modal"
								>
									Close
								</button>
								<button
									type="button"
									class="btn btn-primary"
									id="update-album"
									data-bs-dismiss="modal"
								>
									Update
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
